{{ define "main" }}
  <section class="intro" data-pagefind-ignore>
    <h1 class="intro-title">{{ site.Params.introTitle | default "Welcome to my digital garden." }}</h1>
    <p class="intro-text">
      {{ site.Params.introText | default "I write about computers, my wood working adventures and anything that captures my fascination enough to obsess over for a time." }}
    </p>
  </section>

  <section class="notes-list" data-pagefind-ignore>
    <h2 class="section-title">Notes</h2>

    {{- $notes := where site.RegularPages "Section" "notes" -}}
    {{- $notes = sort $notes "Lastmod" "desc" -}}

    {{- if not (len $notes) -}}
      <p class="muted">No notes yet.</p>
    {{- else -}}
      <ol class="notes">
        {{- range $notes -}}
          <li class="note-item">
            <a class="note-link" href="{{ .RelPermalink }}">
              <div class="note-title-row">
                <span class="note-title">{{ .Title }}</span>
                <time class="note-date" datetime="{{ .Lastmod.Format "2006-01-02" }}">{{ .Lastmod.Format "2006-01-02" }}</time>
              </div>
              {{- with .Params.tags -}}
                <ul class="tag-list tag-list--compact">
                  {{- range . -}}
                    <li class="tag">
                      <span class="tag-pill">#{{ . }}</span>
                    </li>
                  {{- end -}}
                </ul>
              {{- end -}}
              {{- $excerpt := .Summary | plainify | htmlUnescape | truncate 220 -}}
              {{- if $excerpt -}}
                <p class="note-excerpt">{{ $excerpt }}</p>
              {{- end -}}
            </a>
          </li>
        {{- end -}}
      </ol>
    {{- end -}}
  </section>
{{ end }}
